<app-test-case-modal 
  [isVisible]="isVisible" 
  title="Test Case Details" 
  size="large"
  (closeModal)="close()">
  @if (testCase) {
    <div class="space-y-4">
      <div class="row g-3">
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Test Case ID</h6>
          <span class="text-primary fw-semibold">{{testCase.id}}</span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Status</h6>
          <span [ngClass]="badgeUtils.getStatusBadgeClass(testCase.status)" class="badge">
            {{testCase.status || 'N/A'}}
          </span>
        </div>
      </div>
      
      <div>
        <h6 class="text-muted small mb-1">Summary</h6>
        <p class="fw-semibold mb-0">{{testCase.summary}}</p>
      </div>
      
      <div>
        <h6 class="text-muted small mb-1">Description</h6>
        <p class="mb-0" style="white-space: pre-line;">
          {{ testCase.description || 'No description provided' }}
        </p>      
      </div>
      
      @if (testCase.steps) {
        <div>
          <h6 class="text-muted small mb-1">Test Steps</h6>
          <pre class="bg-light p-3 rounded small mb-0" style="white-space: pre-wrap;">{{testCase.steps}}</pre>
        </div>
      }
      
      @if (testCase.expectedResult) {
        <div>
          <h6 class="text-muted small mb-1">Expected Result</h6>
          <p class="mb-0" style="white-space: pre-wrap;">{{testCase.expectedResult}}</p>
        </div>
      }
      
      <div class="row g-3">
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Component</h6>
          <span [ngClass]="badgeUtils.getComponentBadgeClass(testCase.component)" class="badge">
            {{testCase.component || 'N/A'}}
          </span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Sprint</h6>
          <span>{{testCase.sprint || 'No sprint assigned'}}</span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Priority</h6>
          <span [ngClass]="badgeUtils.getPriorityBadgeClass(testCase.priority)" class="badge">
            {{testCase.priority || 'N/A'}}
          </span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Related Task</h6>
          <span>{{testCase.relatedTask || 'No related task'}}</span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Created</h6>
          <span>{{formatDate(testCase.created)}}</span>
        </div>
        <div class="col-md-6">
          <h6 class="text-muted small mb-1">Created By</h6>
          <span>{{testCase.createdBy || 'Unknown'}}</span>
        </div>
      </div>
    </div>
  }
  
  <div class="d-flex justify-content-end gap-2 mt-4">
    <button 
      (click)="close()"
      class="btn btn-secondary">
      Close
    </button>
    <button 
      (click)="editFromView()"
      class="btn btn-primary">
      Edit
    </button>
  </div>
</app-test-case-modal>
